<?php 
$this->title = 'Interface de gestion des articles'; 
?>
<button><a href="<?php echo $this->app->getUrl('?interface=admin&controller=article&action=index');?>">Accueil</a></button>
<div class="articleManager">
  <h2 style="text-align: center">Liste de tous les articles</h2>
  <table class="adminTable">
    <tr>
      <th>Titre</th>
      <th>Auteur</th>
      <th>Date Article</th>
      <th>Action</th>
    </tr>
    <?php foreach ($data as $key => $value){ ?>
    <tr>
      <td><?= $data[$key]['title'] ?></td>
      <td><?= $data[$key]['adminPseudo'] ?></td>
      <td><?= $data[$key]['dateArticle'] ?></td>
      <td>
          <button><a href="<?php echo $this->app->getUrl('?interface=admin&controller=article&action=delete&id=' . $data[$key]['id']);?>">Supprimer</a></button>
          <button><a href="<?php echo $this->app->getUrl('?interface=admin&controller=article&action=index&key=' . $key . '#formArticle');?>">Modifier</a></button>
          <button><a href="<?php echo $this->app->getUrl('?interface=admin&controller=article&action=show&id=' . $data[$key]['id']);?>">Vue</a></button>
      </td>
    </tr>
    <?php } ?>
  </table>

  <form id="formArticle" action="<?php echo $this->app->getUrl('?interface=admin&controller=article&action=save');?>" method="post">
    <fieldset>
      <legend>Nouvel Article:</legend>
      <p><label for="title">Titre de l'article : <input type="text" name="title"  id="title" placeholder="Titre de l'article" value="<?php  if (!is_null($this->request->getParam('key'))) {echo $data[$this->request->getParam('key')]['title'];}?>"></label></p>
      <p><label for="content"></label>Contenu de votre article : </p>
      <p><textarea name="content" id="tinyMCE1" placeholder="Contenu de votre article" rows="15" cols="100"><?php  if (!is_null($this->request->getParam('key'))) {echo $data[$this->request->getParam('key')]['content'];}?></textarea></p>
      <input type="hidden" name="adminId" value="<? echo $_SESSION['adminId'] ?>">
      <input type="hidden" name="id" value="<?php  if (!is_null($this->request->getParam('key'))) {echo $data[$this->request->getParam('key')]['id'];}?>">
      <input type="hidden" name="dateArticle" value="<?echo date("Y-m-d H:i:s");?>">
      <input type="submit" value="Envoyer">
      <button><a href="<?php echo $this->app->getUrl('?interface=admin&controller=article&action=index');?>">Annuler</a></button>
    </fieldset>
  </form>
</div>
